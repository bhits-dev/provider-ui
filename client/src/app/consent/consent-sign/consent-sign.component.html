<div class="p-t-75">
  <md-grid-list cols="1">
    <md-card id="consent-sign" class="m-t-sm m-l m-r">
      <h1 class="font-weight600 dark-bluegrey" fxLayoutAlign="start">{{ 'CONSENT.CONSENT_SIGN.TITLE' | translate }}</h1>
      <div fxLayout="column" fxLayout.gt-xs="row" class="font-size18 p-b-sm">
        <div class="m-r-sm">{{ 'CONSENT.CONSENT_SIGN.REFERENCE_NUMBER' | translate }}:</div>
        <div>
          <strong>{{consent.consentReferenceId}}</strong>
        </div>
      </div>
      <div fxLayout="column" fxLayout.gt-xs="row" class="font-size18 p-b-xs">
        <div fxFlex>
          <span>{{ 'CONSENT.CONSENT_SIGN.PATIENT_NAME' | translate }}: </span>
          <span><strong>{{selectedPatientName.name}}</strong></span>
        </div>
        <div fxFlex>
          <span>{{ 'CONSENT.CONSENT_SIGN.PATIENT_DOB' | translate }}: </span>
          <span><strong>{{selectedPatient.birthDate | date }}</strong></span>
        </div>
      </div>
      <h2 class="bg-dark-blue white p-sm p-l-md">
        {{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.TITLE' | translate }}
      </h2>

      <div fxLayout="column" fxLayout.gt-xs="row" fxLayoutAlign="space-between" class="font-size14 p-b-xs">
        <div fxFlex="48%">
          <div class="current-blue"><strong>{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.AUTHORIZE_LABEL' | translate}}: </strong></div>
          <div fxLayoutAlign="start">

            <div *ngFor="let provider of consent.fromProviders">
              <div fxLayout="row" fxLayoutAlign="start">
                <div class="m-r">{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.PROVIDER.NAME' | translate }}</div>
                <div><strong>{{provider | consentProvider: 'name'}}</strong></div>
              </div>

              <div fxLayout="column" fxLayout.gt-xs="row">
                <div >{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.PROVIDER.NPI' | translate }}</div>
                <div ><strong>{{provider | consentProvider: 'npi'}}</strong></div>
              </div>

              <div>
                <div>{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.PROVIDER.PHONE' | translate }}</div>
                <div><strong>{{provider | consentProvider: 'phone'}}</strong></div>
              </div>

              <div>
                <div>{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.PROVIDER.ADDRESS' | translate }}</div>
                <div><strong>{{provider | consentProvider: 'address' | usPhoneNumber}}</strong></div>
              </div>
            </div>

            <div>
              <div>
                <!--<div>{{provider | consentProvider: 'name'}}</div>-->
                <!--<div>{{provider | consentProvider: 'npi'}}</div>-->
                <!--<div>{{provider | consentProvider: 'phone'}}</div>-->
                <!--<div>{{provider | consentProvider: 'address' | usPhoneNumber}}</div>-->
              </div>
            </div>
          </div>
        </div>

        <div fxFlex="48%">
          <div><strong>{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.DISCLOSE_LABEL' | translate }}: </strong></div>
          <div fxLayoutAlign="start">
            <div>
              <div>{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.PROVIDER.NAME' | translate }}</div>
              <div>{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.PROVIDER.NPI' | translate }}</div>
              <div>{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.PROVIDER.PHONE' | translate }}</div>
              <div>{{ 'CONSENT.CONSENT_SIGN.AUTHORIZATION_SECTION.PROVIDER.ADDRESS' | translate }}
              </div>
            </div>

            <div *ngFor="let provider of consent.toProviders">
              <div>{{provider | consentProvider: 'name'}}</div>
              <div>{{provider | consentProvider: 'npi'}}</div>
              <div>{{provider | consentProvider: 'phone'}}</div>
              <div>{{provider | consentProvider: 'address' | usPhoneNumber}}</div>
            </div>
          </div>
        </div>
      </div>
      <h2 class="bg-dark-bluegrey white p-sm p-l-md">
        {{ 'CONSENT.CONSENT_SIGN.HEALTH_INFORMATION_SECTION.TITLE' | translate }}
      </h2>
      <div fxLayout="row">
        <div fxFlex fxLayout="column">
          <div fxLayoutAlign="start">
            <strong>
              {{ 'CONSENT.CONSENT_SIGN.HEALTH_INFORMATION_SECTION.SHARE_MEDICAL_INFO' | translate }}:
            </strong>
          </div>
          <div fxLayoutAlign="start" fxLayout="column">
            <md-list *ngFor="let shareSensitivityCategory of consent.shareSensitivityCategories">
              <md-list-item>{{shareSensitivityCategory | sensitivityCategory: 'display'}}</md-list-item>
            </md-list>
          </div>
        </div>
        <div fxFlex fxLayout="column">
          <div fxLayoutAlign="start"><strong>
            {{ 'CONSENT.CONSENT_SIGN.HEALTH_INFORMATION_SECTION.SHARE_PURPOSES' | translate }}:
          </strong></div>
          <div fxLayoutAlign="start" fxLayout="column">
            <md-list *ngFor="let sharePurpose of consent.sharePurposes">
              <md-list-item>{{sharePurpose | sharePurpose: 'display'}}</md-list-item>
            </md-list>
          </div>
        </div>
      </div>
      <h2 class="bg-dark-bluegrey white p-sm p-l-md">
        {{ 'CONSENT.CONSENT_SIGN.CONSENT_TERMS_SECTION.TITLE' | translate }}
      </h2>
      <div fxLayout="column">
        <p class="font-size16" fxLayout="row">{{termsWithUserName}}
        </p>
        <div fxLayoutAlign="start" fxLayout="row">
          <div fxFlex fxLayoutAlign="start">
            <strong>{{ 'CONSENT.CONSENT_SIGN.CONSENT_TERMS_SECTION.START_DATE' | translate }}: {{consent.startDate |
              date}}
            </strong>
          </div>
          <div fxFlex fxLayoutAlign="start">
            <strong>
              {{ 'CONSENT.CONSENT_SIGN.CONSENT_TERMS_SECTION.END_DATE' | translate }}: {{consent.endDate | date}}
            </strong>
          </div>
        </div>
        <div>
          <md2-dialog #confirmConsentTerms (onClose)="clearCheckbox()">
            <md2-dialog-title>
              {{ 'CONSENT.CONSENT_SIGN.CONFIRM_DIALOG.TITLE' | translate }}
            </md2-dialog-title>
            <div fxLayout="column">
              <p class="dialog-text">{{ 'CONSENT.CONSENT_SIGN.CONFIRM_DIALOG.CONTENT' | translate }}</p>
              <md-input-container>
                <input mdInput type="password" placeholder="Password" [(ngModel)]="password">
              </md-input-container>
              <div *ngIf="inValid" class="authenticate-invalid">{{
                'CONSENT.CONSENT_SIGN.CONFIRM_DIALOG.AUTHENTICATE_MSG' |
                translate }}
              </div>
            </div>
            <md2-dialog-footer class="bg-lite-gray-f5">
              <button md-raised-button (click)="confirmConsentTerms.close()">
                {{ 'CONSENT.CONSENT_SIGN.CONFIRM_DIALOG.CANCEL_BTN' | translate }}
              </button>
              <button md-raised-button color="primary" (click)="toAuthenticate(confirmConsentTerms)">
                {{ 'CONSENT.CONSENT_SIGN.CONFIRM_DIALOG.CONTINUE_BTN' | translate }}
              </button>
            </md2-dialog-footer>
          </md2-dialog>
          <md-checkbox fxLayoutAlign="start" (click)="confirmConsentTerms.open()" [(ngModel)]="checked">
            {{ 'CONSENT.CONSENT_SIGN.CONSENT_TERMS_SECTION.TERMS' | translate:username}}
          </md-checkbox>
        </div>
      </div>
      <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="20px">
        <button md-raised-button color="primary" (click)="cancel()">
          <strong>{{ 'CONSENT.CONSENT_SIGN.CANCEL_BTN' | translate }}</strong>
        </button>
        <md2-dialog #completeAttestation (onClose)="navigateTo()">
          <md2-dialog-title>{{ 'CONSENT.CONSENT_SIGN.COMPLETE_DIALOG.TITLE' | translate }}</md2-dialog-title>
          <md2-dialog-footer class="bg-lite-gray-f5">
            <button md-raised-button color="primary" (click)="getSignedConsentPdf()">
              {{ 'CONSENT.CONSENT_SIGN.COMPLETE_DIALOG.DOWNLOAD_BTN' | translate }}
            </button>
            <button md-raised-button color="primary" (click)="cancel()">
              {{ 'CONSENT.CONSENT_SIGN.COMPLETE_DIALOG.CONTINUE_BTN' | translate }}
            </button>
          </md2-dialog-footer>
        </md2-dialog>
        <button md-raised-button color="primary" [disabled]="!isAuthenticated"
                (click)="attestConsent(completeAttestation)">
          <strong>
            {{ 'CONSENT.CONSENT_SIGN.COMPLETE_BTN' | translate }}
          </strong>
        </button>
      </div>
    </md-card>
  </md-grid-list>
  <br>
</div>
